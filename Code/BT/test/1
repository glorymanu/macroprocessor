
#include <SoftwareSerial.h>
#include <Servo.h>
#define servoPin 10
SoftwareSerial BTSerial(2, 3); // BTSerial(Rx, Tx)
Servo front; //servo object 생성
int BTstates=0;       // 블루투스 신호 상태 저장용 변수
int currentVar=0 ;
int previousVar=0;
int readVar = 0;

void setup()  {
  Serial.begin(9600);
  BTSerial.begin(9600);  
  front.attach(servoPin);
  pinMode(servoPin, OUTPUT);
}


void moveMotor(int cur_val, static int prev_val, myservo) {
  // 값을 ±4 이상의 변화에서만 모터가 작동되도록하여 떨림현상 제거(값 조정가능)
  if ((cur_val > prev_val + 4) | (cur_val < prev_val - 4)) {
    // myservo.attach(pin_front);
    myservo.write(cur_val); //
    previousVar = cur_val;
  }
  myservo.detach();
}

 

void loop()  {  
  if (BTSerial.available())  {    
  // --- 수신되는 Var 값을 체크 후 서보 모터 구동 루틴 ---
    currentVar=BTSerial.read();
    Serial.println(currentVar); //값 출력해보기

  moveMotor(currentVar, previousVar, front);
     
  } 
}
