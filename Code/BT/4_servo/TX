#include <SoftwareSerial.h>

// pushbutton code 추가

#define front A0
#define side A1
#define delt A2
#define elbow A3
#define gripper A4

#define NUM_JOINT 5 //joint로 바꾸기

#define pin_switch 7

SoftwareSerial BTSerial(2, 3);  // BTSerial(Rx, Tx)


void setup() {
  Serial.begin(9600);
  BTSerial.begin(38400);
pinMode(pin_switch, INPUT_PULLUP);
}

void loop() {

int val[NUM_PIN] = {0, 0, 0, 0, 0};
int state = digitalRead(pin_switch);

while(1 && state){} //;로도 해보기

  int front_val = map(analogRead(front), 0, 1023, 2, 178);  //서보모터 각도(0~180도)
  int side_val = map(analogRead(side), 0, 1023, 2, 178);
  int delt_val = map(analogRead(delt), 0, 1023, 2, 178);
  int elbow_val = map(analogRead(elbow), 0, 1023, 2, 178);
  int gripper_val = map(analogRead(gripper), 0, 1023, 2, 178);

  val[NUM_PIN] = { front_val, side_val, delt_val, elbow_val, gripper_val };

  for (int i = 0; i < NUM_JOINT; i++) {
    Serial.println(val[i]);
    BTSerial.write((byte)val[i]);  
  }
  delay(40);
}
